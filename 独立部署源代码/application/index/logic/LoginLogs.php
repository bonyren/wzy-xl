<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\Defs; class LoginLogs extends Base { protected function __construct() { parent::__construct(); } public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\151\x64", $order = "\144\145\163\143") { goto mz6Qc; eSC26: zp0OS: goto crwe3; ER7Ow: $conditions["\x75\x73\x65\162\x6e\x61\x6d\x65"] = ["\x6c\151\x6b\x65", "\x25" . $search["\x75\163\x65\162\156\x61\155\145"] . "\x25"]; goto SlGjV; mRb4F: if (emptyInArray($search, "\165\x73\x65\162\156\x61\x6d\145")) { goto aKDx8; } goto ER7Ow; blWAZ: QfbwZ: goto rLx3h; B_e46: $records = Db::table("\154\157\147\151\156\137\x6c\157\x67\163")->where($conditions)->order($order)->limit($limit)->field(true)->select(); goto kO_kv; a1ldY: $order = "\151\x64\x20\x64\145\163\143"; goto S8x1i; S8x1i: goto zp0OS; goto u1MQL; jjpPr: if ($sort == "\x74\151\155\145") { goto WK2Rm; } goto a1ldY; CyIT6: $conditions = []; goto mRb4F; crwe3: goto LSc9e; goto blWAZ; gkiVZ: $order = "\164\151\155\x65\40" . $order; goto eSC26; mz6Qc: $limit = ($page - 1) * $rows . "\x2c" . $rows; goto a1sXI; kO_kv: return ["\x74\157\x74\141\x6c" => $totalCount, "\x72\x6f\167\163" => $records]; goto TOUIb; a1sXI: if ($sort == "\x69\144") { goto QfbwZ; } goto jjpPr; u1MQL: WK2Rm: goto gkiVZ; e1cgW: LSc9e: goto CyIT6; rLx3h: $order = "\151\x64\40" . $order; goto e1cgW; zhA_Q: $totalCount = Db::table("\154\157\x67\x69\x6e\137\x6c\x6f\x67\163")->where($conditions)->count(); goto B_e46; SlGjV: aKDx8: goto zhA_Q; TOUIb: } public function add($username, $userid, $useragent, $ip) { Db::table("\x6c\157\x67\x69\x6e\137\154\157\x67\163")->insert(["\165\x73\145\x72\x6e\141\x6d\x65" => $username, "\x75\163\x65\162\x69\144" => $userid, "\x75\x73\145\x72\x61\x67\x65\x6e\x74" => substr($useragent, 0, 100), "\144\145\166\151\x63\x65" => Request::instance()->isMobile() ? Defs::DEVICE_MOBILE : Defs::DEVICE_DESKTOP, "\151\160" => $ip, "\x74\151\x6d\x65" => Db::raw("\x6e\x6f\167\x28\51")]); } }
