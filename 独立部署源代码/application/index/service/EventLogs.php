<?php
 namespace app\index\service; use think\Log; use think\Db; use think\Debug; class EventLogs { const eSeverityError = 1; const eSeverityWarning = 2; const eSeverityInfo = 3; public static $eSeverityDefs = array(self::eSeverityError => "\xe9\224\x99\350\xaf\xaf", self::eSeverityWarning => "\345\221\212\350\xad\246", self::eSeverityInfo => "\xe6\x8f\220\347\244\xba"); public static $eSeverityHtmlDefs = array(self::eSeverityError => "\x3c\x73\x70\x61\156\40\x63\x6c\141\x73\x73\x3d\x22\142\x61\x64\147\x65\x20\142\x61\x64\147\x65\55\144\x61\x6e\147\145\x72\x22\76\xe9\x94\231\350\xaf\xaf\x3c\57\163\160\x61\x6e\x3e", self::eSeverityWarning => "\x3c\x73\160\x61\156\40\x63\x6c\141\163\x73\75\42\x62\141\144\147\x65\40\142\141\144\x67\145\x2d\167\141\x72\x6e\x69\156\x67\42\x3e\xe5\221\212\350\xad\xa6\x3c\x2f\163\160\x61\156\76", self::eSeverityInfo => "\74\x73\x70\x61\156\x20\x63\154\141\163\x73\75\x22\x62\x61\x64\x67\x65\40\x62\x61\144\147\145\x2d\x69\156\146\x6f\x22\76\346\x8f\x90\xe7\244\xba\x3c\57\163\x70\141\x6e\x3e"); protected function __construct() { } public static function I() { goto CLVtG; os_Ro: $instance = new self(); goto wq0iS; sZVos: if ($instance) { goto f1mM9; } goto os_Ro; CLVtG: static $instance = null; goto sZVos; laMp8: return $instance; goto TxzlL; wq0iS: f1mM9: goto laMp8; TxzlL: } public function logEvent($entry, $severity = self::eSeverityInfo) { $result = Db::table("\x65\166\145\x6e\164\x5f\154\157\x67\163")->insert(["\145\156\x74\145\x72\145\144" => date("\131\x2d\x6d\55\x64\40\110\x3a\x69\72\x73"), "\x65\x6e\x74\x72\171" => $entry, "\163\x65\166\145\162\x69\x74\171" => $severity, "\165\x73\145\162\137\151\x64" => RequestContext::I()->loginUserId ?? 0]); return $result == 1 ? true : false; } }
