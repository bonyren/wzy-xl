<?php
 namespace app\index\model; use think\Model; use think\Cache; use think\Log; class Setting extends Model { protected $tableName = "\163\x65\x74\x74\151\x6e\147"; protected $pk = "\x6b\145\x79"; protected static $_settingMemoryCache = array(); public function setMemorySetting($field, $value) { goto scve1; scve1: if (!empty(self::$_settingMemoryCache)) { goto gTBsK; } goto jsQ_T; S2sdc: gTBsK: goto H2tM5; H2tM5: self::$_settingMemoryCache[$field]["\x76\x61\x6c\x75\x65"] = $value; goto oXufP; jsQ_T: $this->getSetting(); goto S2sdc; oXufP: } public function getSetting($field = null) { goto HrabI; DYlx4: icVI7: goto vQxV6; Wzb6I: q9pvO: goto cbsc9; HrabI: if (!($field && isset(self::$_settingMemoryCache[$field]))) { goto xLd73; } goto cFAF6; O1uJS: if (!$items) { goto tCTzM; } goto pnxZ0; Ol3G8: PGQ8F: goto RtqpH; RtqpH: Cache::set("\x73\171\163\164\x65\x6d\137\163\x65\x74\164\x69\x6e\x67", $items); goto IBroD; LARUK: goto Al1OW; goto Wzb6I; K8cDx: ygFCR: goto t6XfQ; eBNIv: return null; goto K8cDx; Z8FVF: return $items; goto fhs6o; Z2szo: qo9pP: goto qx8DV; Q5smc: return $items; goto LARUK; cbsc9: if (isset($items[$field])) { goto qo9pP; } goto LaXtj; lEMtE: $items = Cache::get("\x73\171\x73\x74\x65\155\137\163\145\x74\x74\151\x6e\x67"); goto O1uJS; i0Kxj: $data = $this->where($where)->column("\x6b\145\171\x2c\166\141\154\165\x65"); goto abu1Y; DBxdJ: goto uVbvx; goto DYlx4; t6XfQ: $fields = array_keys($items); goto wcjmc; Kg9S0: if ($field) { goto q9pvO; } goto Q5smc; IBroD: self::$_settingMemoryCache = $items; goto BzRoG; qx8DV: return $items[$field]["\166\x61\x6c\x75\145"]; goto So5wx; fhs6o: goto fiLJz; goto QrLTE; BzRoG: if ($field) { goto nmAmy; } goto Z8FVF; wcjmc: $where = "\x60\x6b\x65\171\x60\x20\151\x6e\x28\47" . implode("\x27\54\47", $fields) . "\x27\51"; goto i0Kxj; abu1Y: foreach ($items as $key => &$arr) { goto C0Zzn; wauaz: XMr45: goto oO3gD; C0Zzn: switch ($key) { case "\114\x4f\107\111\116\137\x4f\x4e\x4c\x59\x5f\117\116\105": case "\163\x75\x62\152\145\x63\164\x5f\163\x68\x6f\167\x5f\160\162\151\143\145": case "\163\x65\x6e\144\x5f\141\x70\160\x6f\151\x6e\x74\137\157\x72\144\145\162\137\164\157\x5f\145\170\160\145\x72\164": case "\163\145\156\144\x5f\x61\x70\160\157\151\x6e\x74\x5f\x6f\x72\144\145\x72\x5f\164\x6f\x5f\143\x75\163\164\157\155\x65\162": goto hZfzP; BmcWO: l0om8: goto cyAJq; AAuyA: $data[$key] = $data[$key] ? "\171\x65\x73" : "\156\x6f"; goto BmcWO; cyAJq: goto rDEUZ; goto ZcqvN; hZfzP: if (!isset($data[$key])) { goto l0om8; } goto AAuyA; ZcqvN: } goto yrQPO; yrQPO: Kh3t7: goto K6mMn; vKrvl: $arr["\x76\141\x6c\x75\x65"] = array_key_exists($key, $data) ? $data[$key] : $arr["\144\x65\146\141\x75\x6c\x74"]; goto njWUZ; njWUZ: $arr["\x6b\x65\x79"] = $key; goto wauaz; K6mMn: rDEUZ: goto vKrvl; oO3gD: } goto Ol3G8; YAEBA: tCTzM: goto umkxx; umkxx: $items = dict('', "\x73\x65\164\164\x69\x6e\x67"); goto LjLW_; vQxV6: return $items[$field]["\166\x61\x6c\165\145"]; goto B5H8a; V5PTe: return null; goto DBxdJ; So5wx: Al1OW: goto YAEBA; id5lu: fiLJz: goto UH5nM; pnxZ0: self::$_settingMemoryCache = $items; goto Kg9S0; PV9u8: xLd73: goto lEMtE; WXFme: if (array_key_exists($field, $items)) { goto icVI7; } goto V5PTe; LaXtj: return null; goto Z2szo; B5H8a: uVbvx: goto id5lu; QrLTE: nmAmy: goto WXFme; cFAF6: return self::$_settingMemoryCache[$field]["\166\x61\154\165\145"]; goto PV9u8; LjLW_: if (!empty($items)) { goto ygFCR; } goto eBNIv; UH5nM: } public function saveSetting($datas = array()) { goto k4dBJ; lh9wv: return $result; goto M4a7_; fknZZ: gT89a: goto bmQy7; uiDeb: return false; goto fknZZ; F2RvF: JATD0: goto KQvFN; bjEwW: return true; goto TUNXP; KQvFN: $this->clearCache(); goto lh9wv; L6JL2: foreach ($datas as $data) { goto G_xSW; G_xSW: switch ($data["\x6b\145\x79"]) { case "\114\117\x47\x49\x4e\137\117\116\x4c\131\x5f\117\116\x45": case "\163\165\x62\152\145\143\164\137\x73\x68\x6f\x77\137\160\162\x69\143\145": case "\163\x65\x6e\144\x5f\x61\160\x70\x6f\x69\156\164\x5f\x6f\x72\x64\145\x72\137\x74\x6f\137\x65\x78\x70\145\x72\x74": case "\x73\x65\156\x64\x5f\x61\x70\160\x6f\x69\156\x74\x5f\x6f\x72\x64\x65\162\x5f\x74\x6f\137\x63\165\163\x74\x6f\x6d\x65\162": $data["\166\141\154\165\x65"] = $data["\166\141\154\165\145"] == "\171\x65\163" ? 1 : 0; } goto GoyRJ; M7pWN: VyPvI: goto iUw7f; GoyRJ: n8sYS: goto D4fKC; Y1ZT3: IZoui: goto AJsNP; AJsNP: SURI6: goto DriKn; D4fKC: nqiOG: goto df_zR; iUw7f: if (!$state) { goto IZoui; } goto pvXVk; lQUb2: dNlTs: goto UawLd; mD9uh: goto VyPvI; goto lQUb2; UawLd: $state = $this->where(array("\153\x65\171" => $data["\x6b\145\x79"]))->update($data); goto M7pWN; df_zR: if (in_array($data["\153\x65\171"], $allowedKeys)) { goto dNlTs; } goto jG0QJ; jG0QJ: $state = $this->isUpdate(false)->data($data)->save(); goto mD9uh; pvXVk: $result = true; goto Y1ZT3; DriKn: } goto F2RvF; TnAIH: $where = "\x60\x6b\145\x79\x60\x20\x69\156\x28\x27" . implode("\47\54\x27", $settingField) . "\47\51"; goto FB6A4; pWGm0: $this->where("\x60\x6b\x65\171\140\x20\x6e\x6f\x74\x20\x69\x6e\50\47" . implode("\x27\54\x27", $settingField) . "\x27\51")->delete(); goto TnAIH; spZXB: $fields = dict('', "\163\x65\164\x74\151\x6e\147"); goto bAyKy; k4dBJ: if ($datas) { goto pEXWN; } goto bjEwW; bmQy7: $settingField = array_keys($fields); goto pWGm0; bAyKy: if (!empty($fields)) { goto gT89a; } goto uiDeb; sACxL: $result = false; goto L6JL2; TUNXP: pEXWN: goto spZXB; FB6A4: $allowedKeys = $this->where($where)->column("\x6b\145\171"); goto sACxL; M4a7_: } public function clearCache() { Cache::rm("\x73\171\163\164\x65\x6d\x5f\163\145\164\x74\151\156\x67"); } }
